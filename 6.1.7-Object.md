6.1.7 The Object Type
=====================

6.1.7 Object型

An Object is logically a collection of properties. Each property is either a
data property, or an accessor property:

- A data property associates a key value with an ECMAScript language value and
  a set of Boolean attributes.
- An accessor property associates a key value with one or two accessor
  functions, and a set of Boolean attributes. The accessor functions are used
  to store or retrieve an ECMAScript language value that is associated with
  the property.

Objectは論理的にはプロパティのコレクションである。それぞれのプロパティは、
データプロパティかアクセッサープロパティである。

- データプロパティは、ECMAScript言語の値をキー値とBoolean属性のセットに関連付ける
- アクセッサープロパティは、1つか2つのアクセッサー関数をキー値と、Boolean属性のセットに関連付ける
  アクセッサー関数は、プロパティに関連付けられているECMAScript言語の値を保存・削除するために使われる

Properties are identified using key values. A property key value is either an
ECMAScript String value or a Symbol value. All String and Symbol values,
including the empty string, are valid as property keys. A property name is a
property key that is a String value.

プロパティはキー値によって一意に特定される。プロパティのキー値は、 StringかSymbolである。
空文字を含む、全てのStringとSymbolは、プロパティのキーとして有効である。
プロパティ名はStringのプロパティキーである

An integer index is a String-valued property key that is a canonical numeric
String (see 7.1.16) and whose numeric value is either +0 or a positive integer
≤ ^253−1. An array index is an integer index whose numeric value i is in th
range +0 ≤ i  2^23-1.

Property keys are used to access properties and their values. There are two
kinds of access for properties: get and set, corresponding to value retrieval
and assignment, respectively. The properties accessible via get and set access
includes both own properties that are a direct part of an object and inherited
properties which are provided by another associated object via a property
inheritance relationship. Inherited properties may be either own or inherited
properties of the associated object. Each own property of an object must each
have a key value that is distinct from the key values of the other own
properties of that object.

All objects are logically collections of properties, but there are multiple forms of objects that differ in their semantics for accessing and manipulating their properties. Ordinary objects are the most common form of objects and have the default object semantics. An exotic object is any form of object whose property semantics differ in any way from the default semantics.

整数のインデックスは、canonical numeric
Stringで、その数値は+0もしくは2の53乗-1未満の、Stringとして評価されるプロパティーキーである。
（自信なし）
配列のインデックスは、数値の範囲が+0以上2の23乗-1未満の整数インデックスである

プロパティのキーはプロパティとその値にアクセスするために使われる
アクセスには、値の取得と代入に対応するgetとsetの2種類が存在する
getとsetを介したアクセスが可能であるプロパティは、
オブジェクトの一部である自身のプロパティと、継承関係にある別のオブジェクトが提供しているプロパティの両方である
継承したプロパティは、継承関係にあるオブジェクト自身のもの、または、継承したものである
オブジェクトの各プロパティは、そのオブジェクトの別のプロパティのキー値と別個のキー値を持っている.

全てのオブジェクトは論理的にプロパティのコレクションだが、オブジェクトには、プロパティへのアクセス・操作するためのセマンティックスが異なる様々な形式がある
通常のオブジェクトは最も共通の形式で、デフォルトのObjectセマンティックスを持つ。
exotic objectは、propertyのセマンティクスがデフォルトとは異なる、任意の形式を持つ

## 6.1.7.1 Property Attributes

プロパティの属性

Attributes are used in this specification to define and explain the state of
Object properties. A data property associates a key value with the attributes
listed in Table 2.

属性は、本仕様では、オブジェクトプロパティの状態を定義・明白にするために使われる。
データプロパティは、テーブル2にリストされている属性とキー値を関連付ける。

### Table 2 — Attributes of a Data Property

| Attribute Name     | Value Domain                 | Description                                                                                                         |
|:------------------:|:----------------------------:|:-------------------------------------------------------------------------------------------------------------------:|
| `[[Value]]`        | Any ECMAScript language type | The value retrieved by a get access of the property.                                                                |
| `[[Writable]]`     | Boolean                      | If false, attempts by ECMAScript code to change the property’s [[Value]] attribute using [[Set]] will not succeed. |
| `[[Enumerable]]`   | Boolean                      | If true, the property will be enumerated by a for-in enumeration (see 13.7.5). Otherwise, the property is said to be non-enumerable. |
| `[[Configurable]]` | Boolean                      | If false, attempts to delete the property, change the property to be an accessor property, or change its attributes (other than [[Value]], or changing [[Writable]] to false) will fail. |


| 属性名             | Value Domain             | Description                                                                                                         |
|:------------------:|:------------------------:|:-------------------------------------------------------------------------------------------------------------------:|
| `[[Value]]`        | 全てのECMAScript言語の型 | プロパティへのgetアクセスによって得られる値                                                                |
| `[[Writable]]`     | Boolean                  | falseの場合、プロパティの`[[Value]]`属性を`[[Set]]`を遣って変更する操作は失敗する |
| `[[Enumerable]]`   | Boolean                  | trueの場合、プロパティはfor-in列挙（13.7.5参照）によって列挙される. そうでない場合、プロパティは列挙不可である |
| `[[Configurable]]` | Boolean                  | falseの場合、プロパティの削除、プロパティのアクセッサープロパティへの変更、 プロパティ属性の変更（`[[Value]]`と、`[[Writable]]`をfalseにする場合を除く）の操作は失敗する |

An accessor property associates a key value with the attributes listed in Table 3.

アクセッサープロパティは、テーブル3に示す属性とキー値を関連付ける。

### Table 3 — Attributes of an Accessor Property


| Attribute Name     | Value Domain                 | Description                                                                                                         |
|:------------------:|:----------------------------:|:-------------------------------------------------------------------------------------------------------------------:|
| `[[Get]]`          | Object/Undefined             | If the value is an Object it must be a function object. The function’s [[Call]] internal method (Table 6) is called with an empty arguments list to retrieve the property value each time a get access of the property is performed. |
| `[[Set]]`          | Object/Undefined             | If the value is an Object it must be a function object. The function’s [[Call]] internal method (Table 6) is called with an arguments list containing the assigned value as its sole argument each time a set access of the property is performed. The effect of a property's [[Set]] internal method may, but is not required to, have an effect on the value returned by subsequent calls to the property's [[Get]] internal method.
| `[[Enumerable]]`   | Boolean                      | If true, the property will be enumerated by a for-in enumeration (see 13.7.5). Otherwise, the property is said to be non-enumerable. |
| `[[Configurable]]` | Boolean                      | If false, attempts to delete the property, change the property to be an accessor property, or change its attributes (other than [[Value]], or changing [[Writable]] to false) will fail. |


| 属性名             | Value Domain             | Description                                                                                                         |
|:------------------:|:------------------------:|:-------------------------------------------------------------------------------------------------------------------:|
| `[[Get]]`          | Object/Undefined         | 値がオブジェクトの場合は必ず関数でなければならない。その関数の`[[Call]]`内部メソッド（テーブル6）は、プロパティのgetアクセスが実行されるたびに、プロパティの値を取得するために引数無しで呼ばれる |
| `[[Set]]`          | Object/Undefined         | 値がオブジェクトの場合は必ず関数でなければならない。その関数の`[[Call]]`内部メソッド（テーブル6）は、プロパティのsetアクセスが実行されるたびに、代入される値を唯一の引数として呼ばれる. プロパティの`[[Set]]`内部メソッドは、（但し、必ずではないが）後に続く`[[Get]]`内部メソッドの実行によって得られる値に影響をあたえる |
| `[[Enumerable]]`   | Boolean                  | trueの場合、プロパティはfor-in列挙（13.7.5参照）によって列挙される. そうでない場合、プロパティは列挙不可である |
| `[[Configurable]]` | Boolean                  | falseの場合、プロパティの削除、プロパティのアクセッサープロパティへの変更、 プロパティ属性の変更（`[[Value]]`と、`[[Writable]]`をfalseにする場合を除く）の操作は失敗する |

If the initial values of a property’s attributes are not explicitly specifie
by this specification, the default value defined in Table 4 is used.

プロパティの属性に対して明示的に初期値が指定されていない場合、テーブル4に示す初期値が指定される

### Table 4 — Default Attribute Values

| Attribute Name     | Default Value |
|:------------------:|:-------------:|
| `[[Value]]`        | undefined     |
| `[[Get]]`          | undefined     |
| `[[Set]]`          | undefined     |
| `[[Writable]]`     | false         |
| `[[Enumerable]]`   | false         |
| `[[Configurable]]` | false         |

## 6.1.7.2 Object Internal Methods and Internal Slots

オブジェクトの内部メソッドと内部スロット

The actual semantics of objects, in ECMAScript, are specified via algorithms called internal methods. Each object in an ECMAScript engine is associated with a set of internal methods that defines its runtime behaviour. These internal methods are not part of the ECMAScript language. They are defined by this specification purely for expository purposes. However, each object within an implementation of ECMAScript must behave as specified by the internal methods associated with it. The exact manner in which this is accomplished is determined by the implementation.

オブジェクトの実際のセマンティックスは、ECMASCriptでは、内部メソッドと呼ばれるアルゴリズムを通して説明される。ECMASCriptエンジンの各オブジェクトは、それらの実行時の共同を定義する内部メソッドの集合と関連付けられる。
それらの内部メソッドはECMAScript言語の一部ではなく、純粋に説明の目的のために定義される。しかしながら、ECMAScript実装が持つ各オブジェクトは、それらに関連付けられている内部メソッドが表現している振る舞いをしなければならない。本仕様が厳密なルールは、実装によって


Internal method names are polymorphic. This means that different object values may perform different algorithms when a common internal method name is invoked upon them. That actual object upon which an internal method is invoked is the “target” of the invocation. If, at runtime, the implementation of an algorithm attempts to use an internal method of an object that the object does not support, a TypeError exception is thrown.

内部メソッドの名前は、ポリモーフィックである。このことは、異なるのオブジェクトが、同じ内部メソッド名で 別々のアルゴリズムを実行する可能性がある、ということを意味する。
内部メソッドが実行される実際のオブジェクトのことを、実行の **ターゲット** と言う。実行時にアルゴリズムの実装が、そのオブジェクトが対応していない内部メソッドを使おうとした場合、TypeError例外が投げられる。

Internal slots correspond to internal state that is associated with objects and used by various ECMAScript specification algorithms. Internal slots are not object properties and they are not inherited. Depending upon the specific internal slot specification, such state may consist of values of any ECMAScript language type or of specific ECMAScript specification type values. Unless explicitly specified otherwise, internal slots are allocated as part of the process of creating an object and may not be dynamically added to an object. Unless specified otherwise, the initial value of an internal slot is the value undefined. Various algorithms within this specification create objects that have internal slots. However, the ECMAScript language provides no direct way to associate internal slots with an object.

Internal methods and internal slots are identified within this specification using names enclosed in double square brackets [[ ]].

Table 5 summarizes the essential internal methods used by this specification that are applicable to all objects created or manipulated by ECMAScript code. Every object must have algorithms for all of the essential internal methods. However, all objects do not necessarily use the same algorithms for those methods.

The “Signature” column of Table 5 and other similar tables describes the invocation pattern for each internal method. The invocation pattern always includes a parenthesized list of descriptive parameter names. If a parameter name is the same as an ECMAScript type name then the name describes the required type of the parameter value. If an internal method explicitly returns a value, its parameter list is followed by the symbol “→” and the type name of the returned value. The type names used in signatures refer to the types defined in clause 6 augmented by the following additional names. “any” means the value may be any ECMAScript language type. An internal method implicitly returns a Completion Record as described in 6.2.2. In addition to its parameters, an internal method always has access to the object that is the target of the method invocation.

